{"version":3,"sources":["webpack:///./src/parts/player.tsx","webpack:///./src/parts/playerUI.tsx","webpack:///./src/pages/index.js"],"names":["PlayerControl","props","useEffect","link","document","title","querySelector","createElement","type","rel","href","getElementsByTagName","appendChild","audio","useRef","window","current","volume","onDataInitialize","className","ref","id","controls","autoPlay","loop","onTimeUpdate","event","currentTime","onTimeChange","src","source","PlayerUI","song","songs","useState","time","setTime","poster","Math","floor","globalThis","duration","IndexPage"],"mappings":"iJAWO,SAASA,EAAcC,GAC5BC,qBAAU,WA4BZ,IACMC,EA5BFC,SAASC,MAAQJ,EAAMI,OA4BrBF,EAAwBC,SAASE,cAAc,sBAAwBF,SAASG,cAAc,SAC7FC,KAAO,eACZL,EAAKM,IAAM,OACXN,EAAKO,KAAO,kGACZN,SAASO,qBAAqB,QAAQ,GAAGC,YAAYT,KA9BlD,CAACF,EAAMI,QAEV,IAAIQ,EAAqCC,mBAQzC,OAPCC,OAAeF,MAAQA,EAExBX,qBAAU,WACRW,EAAMG,QAAQC,OAAS,GACvBhB,EAAMiB,kBAAoBjB,EAAMiB,iBAAiB,MAEhD,IACI,yBAAKC,UAAW,kBACrB,2BAAOC,IAAKP,EAAOQ,GAAG,QAAQC,UAAQ,EAACC,UAAQ,EAACC,MAAI,EAC7CC,aAAc,SAAAC,GACZ,IAAIC,EAAcd,EAAMG,QAAQW,YAChC1B,EAAM2B,cAAgB3B,EAAM2B,aAAaD,KAGhD,4BACEE,IAAK5B,EAAM6B,OACXtB,KAAK,kB,oBC9BN,SAASuB,EAAS9B,GACvB,IAAI+B,EAAO/B,EAAMgC,MAAM,GADO,EAERC,mBAAS,GAA1BC,EAFyB,KAEnBC,EAFmB,OAGAF,mBAAS,GAHT,UAI9B,OAAO,yBAAKf,UAAU,aACpB,yBAAKA,UAAW,SAAUU,IAAKG,EAAKK,SACpC,6BACE,kBAACrC,EAAD,eAAe4B,aAAc,SAAAO,GAAI,OAAIC,EAAQE,KAAKC,MAAMJ,MAAYH,KAEtE,yBAAKb,UAAU,YACZgB,EADH,IACUG,KAAKC,MAAOC,WAAmB3B,MAAMG,QAAQyB,YCP3D,IAAMR,EAAQ,CAAC,CACb5B,MAAO,MACPgC,OAAQ,kGACRP,OAAQ,wUASKY,UANG,kBAChB,kBAAC,IAAD,KACE,kBAACX,EAAD,CAAUE,MAAOA,O","file":"component---src-pages-index-js-359219577bb2284900ee.js","sourcesContent":["import React, { Ref, RefObject, useEffect, useRef } from \"react\"\r\n\r\ninterface Props {\r\n  poster: string,\r\n  title: string,\r\n  source: string,\r\n  volume: number,\r\n  onTimeChange: Function,\r\n  onDataInitialize: Function,\r\n}\r\n\r\nexport function PlayerControl(props: Props) {\r\n  useEffect(() => {\r\n    document.title = props.title\r\n    setFavIcon()\r\n  }, [props.title])\r\n\r\n  let audio: RefObject<HTMLAudioElement> = useRef();\r\n  (window as any).audio = audio\r\n\r\n  useEffect(() => {\r\n    audio.current.volume = 0.1\r\n    props.onDataInitialize && props.onDataInitialize({\r\n    })\r\n  }, [])\r\n  return <div className={\"player-control\"}>\r\n    <audio ref={audio} id=\"audio\" controls autoPlay loop\r\n           onTimeUpdate={event => {\r\n             let currentTime = audio.current.currentTime\r\n             props.onTimeChange && props.onTimeChange(currentTime)\r\n           }\r\n           }>\r\n      <source\r\n        src={props.source}\r\n        type=\"audio/x-m4a\"/>\r\n    </audio>\r\n  </div>\r\n}\r\n\r\n\r\nfunction setFavIcon() {\r\n  var link: HTMLLinkElement = document.querySelector(\"link[rel*='icon']\") || document.createElement(\"link\")\r\n  link.type = \"image/x-icon\"\r\n  link.rel = \"icon\"\r\n  link.href = \"https://luckhunt-blog.oss-cn-beijing.aliyuncs.com/472309f7905298225b97067adcca7bcb0b46d4e6.jfif\"\r\n  document.getElementsByTagName(\"head\")[0].appendChild(link)\r\n}\r\n","import \"./playerUI.css\"\r\nimport React, { Ref, RefObject, useEffect, useRef, useState } from \"react\"\r\nimport { PlayerControl } from \"./player\"\r\n\r\nexport function PlayerUI(props) {\r\n  let song = props.songs[0]\r\n  let [time, setTime] = useState(0)\r\n  let [duration, setDuration] = useState(0)\r\n  return <div className=\"player-ui\">\r\n    <img className={\"poster\"} src={song.poster}/>\r\n    <div>\r\n      <PlayerControl onTimeChange={time => setTime(Math.floor(time))} {...song}/>\r\n    </div>\r\n    <div className=\"controls\">\r\n      {time}/{Math.floor((globalThis as any).audio.current.duration)}\r\n    </div>\r\n  </div>\r\n}\r\n","import React from \"react\"\r\n\r\nimport Layout from \"../components/layout\"\r\nimport SEO from \"../components/seo\"\r\nimport { PlayerControl } from \"../parts/player\"\r\nimport { PlayerUI } from \"../parts/playerUI\"\r\n\r\nconst songs = [{\r\n  title: \"大风吹\",\r\n  poster: \"https://luckhunt-blog.oss-cn-beijing.aliyuncs.com/472309f7905298225b97067adcca7bcb0b46d4e6.jfif\",\r\n  source: \"https://rythm-hunt.oss-cn-beijing.aliyuncs.com/05%20%E5%A4%A7%E9%A2%A8%E5%90%B9.m4a?nsukey=BlPprFHUGB0oX3CfU7deuMFjDTF7k8FukPy2iZPGaRfq3PwXSjwzm7tqbJ7MctQs0r6bIdzEAZxBgz9KdaZo6xw%2FgQBFtuu70JZ0EHNQuvg0ql%2BUka3NfMzgfY%2B9CWZMugGR6hKjcx7SWZSwiTfXNOOCEI%2F6on%2BpndEyqmCcUSkAc7oWWR58HVktKqv8ZFU5SOxmv1IdJ1%2FBqDygzMu2Gw%3D%3D\"\r\n}]\r\n\r\nconst IndexPage = () => (\r\n  <Layout>\r\n    <PlayerUI songs={songs}/>\r\n  </Layout>\r\n)\r\n\r\nexport default IndexPage\r\n"],"sourceRoot":""}